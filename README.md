

### Створи гілку hw06-email з гілки master.



Продовжуємо створення REST API для роботи з колекцією контактів.

### Крок 1: Підготовка інтеграції з SendGrid

1. **Реєстрація на SendGrid**:
   Зареєструйтеся на [SendGrid](https://sendgrid.com/) і створіть обліковий запис.

2. **Створення email-відправника**:
   - Увійдіть до SendGrid.
   - Перейдіть до розділу "Marketing" -> "Senders".
   - Натисніть кнопку "Create New Sender" у правому верхньому куті.
   - Заповніть усі поля у формі (ім'я, email, фізична адреса тощо) та збережіть зміни.
   - Перевірте свій email і натисніть на посилання у листі для верифікації відправника.

3. **Створення API токена**:
   - Увійдіть до SendGrid.
   - Перейдіть до розділу "Email API" -> "Integration Guide".
   - Виберіть "Web API" та оберіть технологію "Node.js".
   - На третьому кроці введіть назву токена (наприклад, `systemcats`), натисніть "Generate" і скопіюйте отриманий токен.
   - Додайте токен до вашого `.env` файлу в проекті (створіть `.env` файл, якщо він ще не існує).

### Крок 2: Створення ендпоінта для верифікації email

1. **Оновлення моделі User**:
   Додайте два нових поля до моделі користувача: `verificationToken` і `verify`. Поле `verify` повинно мати значення `false` за замовчуванням, що означає, що email користувача ще не верифіковано.

2. **Створення ендпоінта GET /users/verify/:verificationToken**:
   - Ендпоінт приймає параметр `verificationToken` і шукає користувача з відповідним токеном у базі даних.
   - Якщо користувач не знайдений, повертається помилка зі статусом 404.
   - Якщо користувач знайдений, встановлюється `verificationToken` у `null`, а поле `verify` змінюється на `true`. Повертається успішна відповідь зі статусом 200.

### Крок 3: Відправка email з посиланням для верифікації

1. **При реєстрації користувача**:
   - Створіть `verificationToken` для нового користувача та збережіть його у базі даних.
   - Відправте email на пошту користувача з посиланням для верифікації (наприклад, `/users/verify/:verificationToken`).
   - Не дозволяйте користувачу увійти в систему, доки його email не буде верифіковано.

### Крок 4: Повторна відправка email з посиланням для верифікації

1. **Створення ендпоінта POST /users/verify**:
   - Ендпоінт приймає тіло запиту у форматі `{email}`.
   - Якщо поле `email` відсутнє, повертається помилка зі статусом 400.
   - Якщо все в порядку, повторно відправляється email з `verificationToken` на вказану адресу, якщо користувач ще не верифікований.
   - Якщо користувач вже верифікований, повертається помилка зі статусом 400.

### Dockerfile (Додаткове завдання)

Для створення Dockerfile для вашого проекту, виконайте наступні дії:

1. **Створіть Dockerfile у корені вашого проекту**.
2. **Визначте базовий образ** (наприклад, `node:14`).
3. **Встановіть залежності**.
4. **Скопіюйте файли проекту до контейнера**.
5. **Визначте команду для запуску вашого додатку**.

### Інструкція для README

```markdown
## Верифікація email користувача за допомогою SendGrid

### Підготовка інтеграції з SendGrid
1. Зареєструйтеся на [SendGrid](https://sendgrid.com/).
2. Створіть email-відправника у розділі "Marketing" -> "Senders".
3. Створіть API токен у розділі "Email API" -> "Integration Guide", виберіть "Web API" та "Node.js".

### Створення ендпоінта для верифікації email
1. Оновіть модель User, додавши поля `verificationToken` та `verify`.
2. Створіть ендпоінт GET /users/verify/:verificationToken для верифікації email.

### Відправка email з посиланням для верифікації
1. При реєстрації користувача створіть `verificationToken` та відправте email з посиланням для верифікації.

### Повторна відправка email з посиланням для верифікації
1. Створіть ендпоінт POST /users/verify для повторної відправки листа з посиланням для верифікації.

### Dockerfile (Додаткове завдання)
1. Створіть Dockerfile у корені проекту.
2. Визначте базовий образ, встановіть залежності, скопіюйте файли проекту до контейнера та визначте команду для запуску додатку.
```

Ці кроки допоможуть вам впровадити функціонал верифікації email користувача за допомогою SendGrid у вашому проекті.